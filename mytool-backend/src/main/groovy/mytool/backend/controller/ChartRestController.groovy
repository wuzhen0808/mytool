package mytool.backend.controller

import groovy.transform.CompileStatic
import mytool.backend.ChartData
import mytool.backend.service.ChartService
import mytool.collector.MetricType
import org.springframework.beans.factory.annotation.Autowired
import org.springframework.web.bind.annotation.GetMapping
import org.springframework.web.bind.annotation.RequestMapping
import org.springframework.web.bind.annotation.RequestParam
import org.springframework.web.bind.annotation.RestController

/*
 * This Groovy source file was generated by the Gradle 'init' task.
 */

@RestController
@CompileStatic
@RequestMapping("/v1/chart")
class ChartRestController {

    @Autowired
    ChartService chartService

    @GetMapping("chart")
    ChartData chart(@RequestParam(name = "corpId", required = false) String corpId, @RequestParam(name = "metricType", required = false) String metricTypeS) {
        MetricType metricType = MetricType.parse(metricTypeS)
        return chartService.getChartData(corpId, metricType)
    }


}
